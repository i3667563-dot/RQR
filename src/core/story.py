"""
–°—é–∂–µ—Ç –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ –∏–≥—Ä—ã.
–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, –±–µ–∑ —Å–ø–æ–π–ª–µ—Ä–æ–≤ –≤ –Ω–∞—á–∞–ª–µ.
"""

from dataclasses import dataclass, field
from typing import List, Optional, Dict, Any


@dataclass
class Character:
    """–ö–ª–∞—Å—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞."""
    
    name: str
    role: str
    description: str = ""
    emoji: str = "üë§"
    age: str = "?"
    backstory: str = ""
    
    def __str__(self) -> str:
        return f"{self.emoji} {self.name} ({self.role})"


@dataclass
class StoryBeat:
    """–ö–ª–∞—Å—Å —Å—é–∂–µ—Ç–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞."""
    
    id: int
    act: int
    title: str
    speaker: str
    text: str
    trigger_question: int
    emoji: str = "üí¨"
    mood: str = "normal"


class Story:
    """
    –ö–ª–∞—Å—Å –∏—Å—Ç–æ—Ä–∏–∏ –∏–≥—Ä—ã.
    
    –°—é–∂–µ—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ:
    - –ê–∫—Ç 1: –ò–≥—Ä–æ–∫ –¥—É–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ —à–æ—É
    - –ê–∫—Ç 2: –ü–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞–º—ë–∫–∏ –Ω–∞ —á—Ç–æ-—Ç–æ –±–æ–ª—å—à–µ–µ
    - –ê–∫—Ç 3: –†–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–¥–∞ –æ –®–æ—É –∏ –ò–≤–∞–Ω–µ
    - –ê–∫—Ç 4: –ò–≥—Ä–æ–∫ –ø–æ–Ω–∏–º–∞–µ—Ç –∏—Å—Ç–∏–Ω–Ω—É—é —Ü–µ–ª—å –∏ –¥–µ–ª–∞–µ—Ç –≤—ã–±–æ—Ä
    """
    
    def __init__(self):
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é."""
        
        self._create_characters()
        self.story_beats: List[StoryBeat] = self._create_story_beats()
        
        self.current_question = 0
        self.shown_beats: List[int] = []
    
    def _create_characters(self):
        """–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π."""
        
        # –ò–≥—Ä–æ–∫ –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–∞–≤–¥—É –æ–± –ò–≤–∞–Ω–µ –¥–æ —Å–µ—Ä–µ–¥–∏–Ω—ã –∏–≥—Ä—ã
        self.host = Character(
            name="–ò–≤–∞–Ω",
            role="–í–µ–¥—É—â–∏–π —à–æ—É",
            emoji="üé§",
            age="?",
            description="–ó–∞–≥–∞–¥–æ—á–Ω—ã–π –≤–µ–¥—É—â–∏–π –≤ —Ç—ë–º–Ω–æ–º –∫–æ—Å—Ç—é–º–µ. –ì–æ–≤–æ—Ä–∏—Ç —Å–ø–æ–∫–æ–π–Ω–æ, "
                       "–Ω–æ –∏–Ω–æ–≥–¥–∞ –≤ –µ–≥–æ –≥–æ–ª–æ—Å–µ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–µ—Ç –≥—Ä—É—Å—Ç—å.",
            backstory=""  # –ò–≥—Ä–æ–∫ —É–∑–Ω–∞–µ—Ç —ç—Ç–æ –ø–æ–∑–∂–µ
        )
        
        self.player = Character(
            name="–ê–ª–µ–∫—Å–µ–π",
            role="–£—á–∞—Å—Ç–Ω–∏–∫",
            emoji="üë®",
            age="25-35",
            description="–û–±—ã—á–Ω—ã–π –ø–∞—Ä–µ–Ω—å, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç, –∫–∞–∫ –∑–¥–µ—Å—å –æ–∫–∞–∑–∞–ª—Å—è.",
            backstory=""
        )
    
    def _create_story_beats(self) -> List[StoryBeat]:
        """
        –°–æ–∑–¥–∞—Ç—å —Å—é–∂–µ—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —Å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–º —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ–º.
        
        –ü—Ä–∏–Ω—Ü–∏–ø:
        - –°–Ω–∞—á–∞–ª–∞ –∏–≥—Ä–æ–∫ –¥—É–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞
        - –ü–æ—Ç–æ–º –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å—Ç—Ä–∞–Ω–Ω—ã–µ –Ω–∞–º—ë–∫–∏
        - –ü–æ—Ç–æ–º —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–∞—Å—Ç—å –ø—Ä–∞–≤–¥—ã
        - –í –∫–æ–Ω—Ü–µ ‚Äî –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞
        """
        
        beats = []
        
        # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        # –ê–ö–¢ 1: "–ü—Ä–æ—Å—Ç–æ –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞?" (–≤–æ–ø—Ä–æ—Å—ã 1-38)
        # –ò–≥—Ä–æ–∫ –¥—É–º–∞–µ—Ç, —á—Ç–æ –ø–æ–ø–∞–ª –≤ –∫–∞–∫–æ–µ-—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ–µ —Ç–µ–ª–µ—à–æ—É
        # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        beats.extend([
            # –í–æ–ø—Ä–æ—Å 1 ‚Äî –Ω–∞—á–∞–ª–æ, –±–µ–∑ —Å–ø–æ–π–ª–µ—Ä–æ–≤
            StoryBeat(
                id=1,
                act=1,
                title="–ü—Ä–æ–±—É–∂–¥–µ–Ω–∏–µ",
                speaker="–ò–≤–∞–Ω",
                text="–ê-–∞-–∞... –æ—á–Ω—É–ª—Å—è. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å.\n\n"
                     "–ù–µ –ø—É–≥–∞–π—Å—è. –¢—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ü—Ä–æ—Å—Ç–æ... "
                     "–Ω–∞–∑–æ–≤—ë–º —ç—Ç–æ \"–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏\".\n\n"
                     "–ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω. –Ø –≤–µ–¥—É—â–∏–π —ç—Ç–æ–≥–æ —à–æ—É. "
                     "–ê —Ç—ã ‚Äî –Ω–∞—à —Å–ª–µ–¥—É—é—â–∏–π —É—á–∞—Å—Ç–Ω–∏–∫.\n\n"
                     "–í—Å—ë –ø—Ä–æ—Å—Ç–æ: 152 –≤–æ–ø—Ä–æ—Å–∞, —á–µ—Ç—ã—Ä–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞, "
                     "–æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π. –ì–æ—Ç–æ–≤?",
                trigger_question=1,
                emoji="üé§",
                mood="calm"
            ),
            # –í–æ–ø—Ä–æ—Å 5 ‚Äî –ª—ë–≥–∫–∏–π –Ω–∞–º—ë–∫
            StoryBeat(
                id=2,
                act=1,
                title="–°—Ç—Ä–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞",
                speaker="–ò–≤–∞–Ω",
                text="–ó–Ω–∞–µ—à—å, –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–µ—Ä–≤–Ω–∏—á–∞—é—Ç. "
                     "–ê —Ç—ã... —Ç—ã –æ—Ç–≤–µ—á–∞–µ—à—å —É–≤–µ—Ä–µ–Ω–Ω–æ.\n\n"
                     "–ë—É–¥—Ç–æ –≥–¥–µ-—Ç–æ –≤ –≥–ª—É–±–∏–Ω–µ —É–∂–µ –∑–Ω–∞–ª —ç—Ç–∏ –æ—Ç–≤–µ—Ç—ã. "
                     "–°—Ç—Ä–∞–Ω–Ω–æ, –¥–∞?",
                trigger_question=5,
                emoji="ü§î",
                mood="mysterious"
            ),
            # –í–æ–ø—Ä–æ—Å 10 ‚Äî –∏–≥—Ä–æ–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–æ–º–Ω–µ–≤–∞—Ç—å—Å—è
            StoryBeat(
                id=3,
                act=1,
                title="–í–æ–ø—Ä–æ—Å—ã –∏–≥—Ä–æ–∫–∞",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ü–æ–¥–æ–∂–¥–∏... –∞ –∫–∞–∫ —è —Å—é–¥–∞ –ø–æ–ø–∞–ª? "
                     "–Ø –≤–µ–¥—å –ø—Ä–æ—Å—Ç–æ –ª—ë–≥ —Å–ø–∞—Ç—å... –∏–ª–∏ –Ω–µ—Ç?\n\n"
                     "–ò –≥–¥–µ –∫–∞–º–µ—Ä—ã? –≠—Ç–æ –≤–æ–æ–±—â–µ —Ç–µ–ª–µ—à–æ—É?",
                trigger_question=10,
                emoji="üìπ",
                mood="normal"
            ),
            # –í–æ–ø—Ä–æ—Å 15 ‚Äî —É–∫–ª–æ–Ω—á–∏–≤—ã–π –æ—Ç–≤–µ—Ç
            StoryBeat(
                id=4,
                act=1,
                title="–£–∫–ª–æ–Ω–µ–Ω–∏–µ",
                speaker="–ò–≤–∞–Ω",
                text="–ö–∞–º–µ—Ä—ã? –•–º... –°–∫–∞–∂–µ–º —Ç–∞–∫, –∑–∞ —Ç–æ–±–æ–π –Ω–∞–±–ª—é–¥–∞—é—Ç. "
                     "–ù–æ –Ω–µ —Ç–∞–∫, –∫–∞–∫ —Ç—ã –¥—É–º–∞–µ—à—å.\n\n"
                     "–ü—Ä–æ–¥–æ–ª–∂–∏–º. –£ –Ω–∞—Å –µ—â—ë –º–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤.",
                trigger_question=15,
                emoji="üò∂",
                mood="mysterious"
            ),
            # –í–æ–ø—Ä–æ—Å 20 ‚Äî –µ—â—ë –Ω–∞–º—ë–∫
            StoryBeat(
                id=5,
                act=1,
                title="–ü–∞–º—è—Ç—å",
                speaker="–ò–≤–∞–Ω",
                text="–¢—ã –≤–µ–¥—å –∑–∞–º–µ—á–∞–µ—à—å, –¥–∞? –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–æ–ø—Ä–æ—Å—ã "
                     "–∫–∞–∂—É—Ç—Å—è... –∑–Ω–∞–∫–æ–º—ã–º–∏.\n\n"
                     "–ë—É–¥—Ç–æ —Ç—ã —É—á–∏–ª —ç—Ç–æ –¥–∞–≤–Ω–æ. –û—á–µ–Ω—å –¥–∞–≤–Ω–æ.",
                trigger_question=20,
                emoji="üí≠",
                mood="mysterious"
            ),
            # –í–æ–ø—Ä–æ—Å 25 ‚Äî –∏–≥—Ä–æ–∫ –Ω–∞—Å—Ç–∞–∏–≤–∞–µ—Ç
            StoryBeat(
                id=6,
                act=1,
                title="–ù–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ò–≤–∞–Ω, —Ç—ã –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≥–æ–≤–æ—Ä–∏—à—å –∑–∞–≥–∞–¥–∫–∞–º–∏. "
                     "–°–∫–æ–ª—å–∫–æ –µ—â—ë –º–æ–∂–Ω–æ —Å–∫—Ä—ã–≤–∞—Ç—å?\n\n"
                     "–ì–¥–µ —è? –ß—Ç–æ —ç—Ç–æ –∑–∞ –º–µ—Å—Ç–æ?",
                trigger_question=25,
                emoji="üò†",
                mood="normal"
            ),
            # –í–æ–ø—Ä–æ—Å 30 ‚Äî –ø–æ–ª—É–ø—Ä–∞–≤–¥–∞
            StoryBeat(
                id=7,
                act=1,
                title="–ü–æ–ª—É–ø—Ä–∞–≤–¥–∞",
                speaker="–ò–≤–∞–Ω",
                text="–¢—ã –ø—Ä–∞–≤. –ó–∞—Å–ª—É–∂–∏–≤–∞–µ—à—å –∑–Ω–∞—Ç—å —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ.\n\n"
                     "–≠—Ç–æ –º–µ—Å—Ç–æ... –æ–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤–Ω–µ –≤—Ä–µ–º–µ–Ω–∏. "
                     "–ó–¥–µ—Å—å –ø—Ä–æ—à–ª–æ–µ, –Ω–∞—Å—Ç–æ—è—â–µ–µ –∏ –±—É–¥—É—â–µ–µ ‚Äî –æ–¥–Ω–æ.\n\n"
                     "–ê –≤–æ–ø—Ä–æ—Å—ã... –æ–Ω–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫. –ö–∞–∂–¥—ã–π ‚Äî "
                     "–∫–ª—é—á –∫ —á–µ–º—É-—Ç–æ –±–æ–ª—å—à–µ–º—É.\n\n"
                     "–ù–æ –ø–æ–ª–Ω—É—é –ø—Ä–∞–≤–¥—É —Ç—ã —É–∑–Ω–∞–µ—à—å –ø–æ–∑–∂–µ. "
                     "–ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤.",
                trigger_question=30,
                emoji="üóùÔ∏è",
                mood="mysterious"
            ),
            # –í–æ–ø—Ä–æ—Å 35 ‚Äî —Å—Ç—Ä–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç
            StoryBeat(
                id=8,
                act=1,
                title="–°—Ç—Ä–∞–Ω–Ω–æ—Å—Ç—å",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ó–Ω–∞–µ—à—å, —á—Ç–æ —Å—Ç—Ä–∞–Ω–Ω–æ? –Ø –≤–µ–¥—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ "
                     "–ø–æ–º–Ω—é –æ—Ç–≤–µ—Ç—ã. –ë—É–¥—Ç–æ... –±—É–¥—Ç–æ —ç—Ç–æ —á–∞—Å—Ç—å –º–µ–Ω—è.\n\n"
                     "–ù–æ —è –∂–µ –Ω–µ —É—á–∏–ª —ç—Ç–æ–≥–æ. –ò–ª–∏ —É—á–∏–ª?",
                trigger_question=35,
                emoji="ü§®",
                mood="normal"
            ),
            # –í–æ–ø—Ä–æ—Å 38 ‚Äî –∫–æ–Ω–µ—Ü –ø–µ—Ä–≤–æ–≥–æ –∞–∫—Ç–∞
            StoryBeat(
                id=9,
                act=1,
                title="–ü–µ—Ä–µ–ª–æ–º",
                speaker="–ò–≤–∞–Ω",
                text="–í–æ—Ç. –¢—ã –Ω–∞—á–∞–ª —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å.\n\n"
                     "–°–∫–æ—Ä–æ... –æ—á–µ–Ω—å —Å–∫–æ—Ä–æ... —Ç—ã –ø–æ–π–º—ë—à—å. "
                     "–ù–æ —è –Ω–µ –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏.\n\n"
                     "–°–∞–º –¥–æ–ª–∂–µ–Ω –¥–æ–π—Ç–∏. –¢–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.",
                trigger_question=38,
                emoji="‚è≥",
                mood="mysterious"
            ),
        ])
        
        # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        # –ê–ö–¢ 2: "–ß—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫" (–≤–æ–ø—Ä–æ—Å—ã 39-76)
        # –ò–≥—Ä–æ–∫ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ–¥–æ–∑—Ä–µ–≤–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —à–æ—É
        # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        beats.extend([
            # –í–æ–ø—Ä–æ—Å 40 ‚Äî –Ω–∞—á–∞–ª–æ –≤—Ç–æ—Ä–æ–≥–æ –∞–∫—Ç–∞
            StoryBeat(
                id=10,
                act=2,
                title="–ü—Ä–∏–∑–Ω–∞–Ω–∏–µ",
                speaker="–ò–≤–∞–Ω",
                text="–°–æ—Ä–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–∑–∞–¥–∏. –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è –ª—É—á—à–µ, "
                     "—á–µ–º —è –æ–∂–∏–¥–∞–ª.\n\n"
                     "–õ–∞–¥–Ω–æ. partial –ø—Ä–∞–≤–¥–∞.\n\n"
                     "–Ø... –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ—Ç, –∑–∞ –∫–æ–≥–æ —Å–µ–±—è –≤—ã–¥–∞—é. "
                     "–ò —ç—Ç–æ –º–µ—Å—Ç–æ ‚Äî –Ω–µ —Ç–µ–ª–µ—à–æ—É.\n\n"
                     "–ù–æ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏... –ø–æ–∑–∂–µ. –î–µ—Ä–∂–∏—Å—å.",
                trigger_question=40,
                emoji="üòü",
                mood="dramatic"
            ),
            # –í–æ–ø—Ä–æ—Å 45 ‚Äî —à–æ–∫
            StoryBeat(
                id=11,
                act=2,
                title="–®–æ–∫",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ß—Ç–æ –∑–Ω–∞—á–∏—Ç \"–Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ—Ç\"? –ò–≤–∞–Ω, —Ç—ã –º–µ–Ω—è "
                     "–ø—É–≥–∞–µ—à—å.\n\n"
                     "–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ —Ç–µ–ª–µ—à–æ—É, —Ç–æ —á—Ç–æ? –ò –ø–æ—á–µ–º—É "
                     "—è –Ω–µ –º–æ–≥—É –ø—Ä–æ—Å–Ω—É—Ç—å—Å—è?",
                trigger_question=45,
                emoji="üò∞",
                mood="dramatic"
            ),
            # –í–æ–ø—Ä–æ—Å 50 ‚Äî –µ—â—ë —É–∫–ª–æ–Ω–µ–Ω–∏–µ
            StoryBeat(
                id=12,
                act=2,
                title="–¢–µ—Ä–ø–µ–Ω–∏–µ",
                speaker="–ò–≤–∞–Ω",
                text="–ü—Ä–æ—Å–Ω—É—Ç—å—Å—è? –•–º...\n\n"
                     "–°–ª—É—à–∞–π, —è –Ω–µ –º–æ–≥—É —Å–∫–∞–∑–∞—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É. "
                     "–¢—ã –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø–æ–≤–µ—Ä–∏—à—å.\n\n"
                     "–ù–æ –æ–±–µ—â–∞—é: –∫–æ–≥–¥–∞ –¥–æ–π–¥—ë—à—å –¥–æ —Å–µ–º–∏–¥–µ—Å—è—Ç–æ–≥–æ... "
                     "—É–∑–Ω–∞–µ—à—å –ø—Ä–∞–≤–¥—É. –í—Å—é.\n\n"
                     "–î–µ—Ä–∂–∏—Å—å. –û—Å—Ç–∞–ª–æ—Å—å –Ω–µ–º–Ω–æ–≥–æ.",
                trigger_question=50,
                emoji="üôè",
                mood="calm"
            ),
            # –í–æ–ø—Ä–æ—Å 55 ‚Äî –∏–≥—Ä–æ–∫ —Å–¥–∞—ë—Ç—Å—è
            StoryBeat(
                id=13,
                act=2,
                title="–°–º–∏—Ä–µ–Ω–∏–µ",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–õ–∞–¥–Ω–æ... –ª–∞–¥–Ω–æ. –Ø –ø–æ–¥–æ–∂–¥—É.\n\n"
                     "–ù–æ –µ—Å–ª–∏ —ç—Ç–æ –∫–∞–∫–æ–π-—Ç–æ —Ä–æ–∑—ã–≥—Ä—ã—à... "
                     "—è –Ω–∞–π–¥—É —Ç–µ–±—è, –ò–≤–∞–Ω.",
                trigger_question=55,
                emoji="üò§",
                mood="normal"
            ),
            # –í–æ–ø—Ä–æ—Å 60 ‚Äî –Ω–∞–º—ë–∫ –Ω–∞ –ø—Ä–æ—à–ª–æ–µ
            StoryBeat(
                id=14,
                act=2,
                title="–ù–∞–º—ë–∫",
                speaker="–ò–≤–∞–Ω",
                text="–ó–Ω–∞–µ—à—å, –ø–æ—á–µ–º—É —è –∑–¥–µ—Å—å?\n\n"
                     "–ü–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ —É—Å–ø–µ–ª. –ù–µ —Å–∫–∞–∑–∞–ª –≤–∞–∂–Ω–æ–µ. "
                     "–ù–µ —Å–¥–µ–ª–∞–ª...\n\n"
                     "–í–ø—Ä–æ—á–µ–º, —ç—Ç–æ –º–æ—è –∏—Å—Ç–æ—Ä–∏—è. "
                     "–°–µ–π—á–∞—Å –≤–∞–∂–Ω–µ–µ —Ç–≤–æ—è.",
                trigger_question=60,
                emoji="üíî",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 65 ‚Äî –∏–≥—Ä–æ–∫ –∑–∞–º–µ—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å
            StoryBeat(
                id=15,
                act=2,
                title="–î–µ—Ç–∞–ª—å",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ò–≤–∞–Ω... –∞ –ø–æ—á–µ–º—É —Ç—ã –≤—Å—ë –≤—Ä–µ–º—è —Å–º–æ—Ç—Ä–∏—à—å "
                     "–Ω–∞ —ç—Ç—É —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –≤ –∫–∞—Ä–º–∞–Ω–µ?\n\n"
                     "–ö—Ç–æ —Ç–∞–º?",
                trigger_question=65,
                emoji="üì∑",
                mood="calm"
            ),
            # –í–æ–ø—Ä–æ—Å 70 ‚Äî –ª–∏—á–Ω–æ–µ
            StoryBeat(
                id=16,
                act=2,
                title="–õ–∏—á–Ω–æ–µ",
                speaker="–ò–≤–∞–Ω",
                text="...–ù–∞—Ç–∞–ª—å—è.\n\n"
                     "–ú—ã –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –ø–æ–∂–µ–Ω–∏—Ç—å—Å—è. –ù–æ –Ω–µ —É—Å–ø–µ–ª–∏.\n\n"
                     "–≠—Ç–æ –±—ã–ª–æ... –¥–∞–≤–Ω–æ. –û—á–µ–Ω—å –¥–∞–≤–Ω–æ.\n\n"
                     "–ü—Ä–æ–¥–æ–ª–∂–∏–º. –î–æ —Å–µ–º–∏–¥–µ—Å—è—Ç–æ–≥–æ –Ω–µ–¥–∞–ª–µ–∫–æ.",
                trigger_question=70,
                emoji="üòî",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 75 ‚Äî –ø—Ä–µ–¥–≤–∫—É—à–µ–Ω–∏–µ
            StoryBeat(
                id=17,
                act=2,
                title="–ü—Ä–µ–¥–≤–∫—É—à–µ–Ω–∏–µ",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ü—è—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–æ –ø—Ä–∞–≤–¥—ã. "
                     "–Ø –≥–æ—Ç–æ–≤, –ò–≤–∞–Ω.\n\n"
                     "–ß—Ç–æ –±—ã —Ç—ã –Ω–∏ —Å–∫—Ä—ã–≤–∞–ª... —è –≤—ã–¥–µ—Ä–∂—É.",
                trigger_question=75,
                emoji="üí™",
                mood="normal"
            ),
            # –í–æ–ø—Ä–æ—Å 76 ‚Äî –∫–æ–Ω–µ—Ü –∞–∫—Ç–∞, –æ–±–µ—â–∞–Ω–∏–µ
            StoryBeat(
                id=18,
                act=2,
                title="–û–±–µ—â–∞–Ω–∏–µ",
                speaker="–ò–≤–∞–Ω",
                text="–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å... –∏ —Ç—ã —É–∑–Ω–∞–µ—à—å.\n\n"
                     "–ü–æ–º–Ω–∏: —è –Ω–µ –≤—Ä–∞–≥ —Ç–µ–±–µ. "
                     "–Ø –ø—Ä–æ—Å—Ç–æ... –∑–∞—Å—Ç—Ä—è–ª.\n\n"
                     "–ì–æ—Ç–æ–≤?",
                trigger_question=76,
                emoji="‚è∏Ô∏è",
                mood="dramatic"
            ),
        ])
        
        # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        # –ê–ö–¢ 3: "–ü—Ä–∞–≤–¥–∞" (–≤–æ–ø—Ä–æ—Å—ã 77-114)
        # –ü–æ–ª–Ω–æ–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ: –ò–≤–∞–Ω –º—ë—Ä—Ç–≤, —ç—Ç–æ –®–æ—É –ü–∞–º—è—Ç–∏
        # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        beats.extend([
            # –í–æ–ø—Ä–æ—Å 77 ‚Äî –ë–û–õ–¨–®–û–ï –û–¢–ö–†–û–í–ï–ù–ò–ï
            StoryBeat(
                id=19,
                act=3,
                title="–ü—Ä–∞–≤–¥–∞",
                speaker="–ò–≤–∞–Ω",
                text="–í—Å—ë. –í—Ä–µ–º—è –ø—Ä–∏—à–ª–æ.\n\n"
                     "–ê–ª–µ–∫—Å–µ–π... —è –º—ë—Ä—Ç–≤.\n\n"
                     "–£–º–µ—Ä —Ç—Ä–∏–¥—Ü–∞—Ç—å –ª–µ—Ç –Ω–∞–∑–∞–¥. –í –∞–≤–∞—Ä–∏–∏. "
                     "15 —Å–µ–Ω—Ç—è–±—Ä—è 2024 –≥–æ–¥–∞.\n\n"
                     "–ú–æ—è –¥—É—à–∞ –Ω–µ —Å–º–æ–≥–ª–∞ —É–π—Ç–∏. –ò —è —Å—Ç–∞–ª... "
                     "–≤–µ–¥—É—â–∏–º —ç—Ç–æ–≥–æ –º–µ—Å—Ç–∞.\n\n"
                     "–≠—Ç–æ –Ω–µ —Ç–µ–ª–µ—à–æ—É. –≠—Ç–æ \"–®–æ—É –ü–∞–º—è—Ç–∏\". "
                     "–ú–µ—Å—Ç–æ –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏.",
                trigger_question=77,
                emoji="üíÄ",
                mood="dramatic"
            ),
            # –í–æ–ø—Ä–æ—Å 80 ‚Äî —Ä–µ–∞–∫—Ü–∏—è
            StoryBeat(
                id=20,
                act=3,
                title="–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ß—Ç–æ?! –≠—Ç–æ... —ç—Ç–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ. "
                     "–Ø –∂–µ –≥–æ–≤–æ—Ä—é —Å —Ç–æ–±–æ–π! –í–∏–∂—É —Ç–µ–±—è!\n\n"
                     "–ò–ª–∏... —è —Ç–æ–∂–µ –º—ë—Ä—Ç–≤?!",
                trigger_question=80,
                emoji="üò±",
                mood="dramatic"
            ),
            # –í–æ–ø—Ä–æ—Å 85 ‚Äî –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
            StoryBeat(
                id=21,
                act=3,
                title="–û–±—ä—è—Å–Ω–µ–Ω–∏–µ",
                speaker="–ò–≤–∞–Ω",
                text="–ù–µ—Ç! –¢—ã –∂–∏–≤. –¢–≤–æ—ë —Ç–µ–ª–æ —Å–ø–∏—Ç –≥–¥–µ-—Ç–æ. "
                     "–ê –¥—É—à–∞... –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å.\n\n"
                     "–¢–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –®–æ—É. –û–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–µ—Ö, "
                     "–∫—Ç–æ –ø–æ—Ç–µ—Ä—è–ª —Å–≤—è–∑—å —Å–æ —Å–≤–æ–∏–º–∏ –∫–æ—Ä–Ω—è–º–∏.\n\n"
                     "–ö—Ç–æ –∑–∞–±—ã–ª, –∫—Ç–æ –æ–Ω.",
                trigger_question=85,
                emoji="üëª",
                mood="calm"
            ),
            # –í–æ–ø—Ä–æ—Å 90 ‚Äî –æ—Å–æ–∑–Ω–∞–Ω–∏–µ
            StoryBeat(
                id=22,
                act=3,
                title="–û—Å–æ–∑–Ω–∞–Ω–∏–µ",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ü–æ–¥–æ–∂–¥–∏... —Ç–æ –µ—Å—Ç—å –≤—Å—ë —ç—Ç–æ –≤—Ä–µ–º—è... "
                     "—è –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –æ—Ç–≤–µ—á–∞–ª –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã?\n\n"
                     "–≠—Ç–æ –±—ã–ª–æ... –¥–ª—è —á–µ–≥–æ?",
                trigger_question=90,
                emoji="ü§Ø",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 95 ‚Äî —Ü–µ–ª—å
            StoryBeat(
                id=23,
                act=3,
                title="–¶–µ–ª—å",
                speaker="–ò–≤–∞–Ω",
                text="–î–ª—è –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏—è. –ü–∞–º—è—Ç–∏. –ò—Å—Ç–æ—Ä–∏–∏.\n\n"
                     "–ö–∞–∂–¥–æ–µ –ø–æ–∫–æ–ª–µ–Ω–∏–µ –∑–∞–±—ã–≤–∞–µ—Ç —á—É—Ç—å –±–æ–ª—å—à–µ. "
                     "–ï—â—ë –Ω–µ–º–Ω–æ–≥–æ ‚Äî –∏ –º—ã —Å—Ç–∞–Ω–µ–º –∏–≤–∞–Ω–∞–º–∏, "
                     "–Ω–µ –ø–æ–º–Ω—è—â–∏–º–∏ —Ä–æ–¥—Å—Ç–≤–∞.\n\n"
                     "–ê —Ç—ã... —Ç—ã –≤—Å–ø–æ–º–∏–Ω–∞–µ—à—å. –Ø –≤–∏–∂—É.",
                trigger_question=95,
                emoji="üå≥",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 100 ‚Äî –≤–æ–ø—Ä–æ—Å –æ –ù–∞—Ç–∞–ª—å–µ
            StoryBeat(
                id=24,
                act=3,
                title="–ù–∞—Ç–∞–ª—å—è",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ù–∞—Ç–∞–ª—å—è... –æ–Ω–∞ —Ç–æ–∂–µ?\n\n"
                     "–í —Ç–æ–π –∞–≤–∞—Ä–∏–∏?",
                trigger_question=100,
                emoji="üíî",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 105 ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ò–≤–∞–Ω–∞
            StoryBeat(
                id=25,
                act=3,
                title="–ò—Å—Ç–æ—Ä–∏—è",
                speaker="–ò–≤–∞–Ω",
                text="–î–∞. –ú—ã –µ—Ö–∞–ª–∏ –∫ –µ—ë —Ä–æ–¥–∏—Ç–µ–ª—è–º ‚Äî —Å–æ–æ–±—â–∏—Ç—å "
                     "–æ —Å–≤–∞–¥—å–±–µ.\n\n"
                     "–ì—Ä—É–∑–æ–≤–∏–∫ –≤—ã–ª–µ—Ç–µ–ª –Ω–∞ –≤—Å—Ç—Ä–µ—á–∫—É. "
                     "–Ø –Ω–µ —Å–ø—Ä–∞–≤–∏–ª—Å—è.\n\n"
                     "–û–Ω–∞ —É—à–ª–∞ —Å–ø–æ–∫–æ–π–Ω–æ. –ê —è... –∑–∞—Å—Ç—Ä—è–ª.\n\n"
                     "–ò –≤–æ—Ç —É–∂–µ 30 –ª–µ—Ç –∂–¥—É —Ç–æ–≥–æ, "
                     "–∫—Ç–æ –ø–æ–º–æ–∂–µ—Ç –º–Ω–µ –æ—Ç–ø—É—Å—Ç–∏—Ç—å.",
                trigger_question=105,
                emoji="üò¢",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 110 ‚Äî –≤—ã–±–æ—Ä
            StoryBeat(
                id=26,
                act=3,
                title="–í—ã–±–æ—Ä",
                speaker="–ò–≤–∞–Ω",
                text="–ö–æ–≥–¥–∞ –¥–æ–π–¥—ë—à—å –¥–æ –∫–æ–Ω—Ü–∞... "
                     "—É —Ç–µ–±—è –±—É–¥–µ—Ç –≤—ã–±–æ—Ä.\n\n"
                     "–ü–µ—Ä–≤—ã–π: —É–π—Ç–∏. –í–µ—Ä–Ω—É—Ç—å—Å—è —Å–æ –≤—Å–µ–π –ø–∞–º—è—Ç—å—é, "
                     "–∫–æ—Ç–æ—Ä—É—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª.\n\n"
                     "–í—Ç–æ—Ä–æ–π: –æ—Å—Ç–∞—Ç—å—Å—è. –ó–∞–Ω—è—Ç—å –º–æ—ë –º–µ—Å—Ç–æ.\n\n"
                     "–¢—Ä–µ—Ç–∏–π... –æ –Ω—ë–º –ø–æ–∑–∂–µ.",
                trigger_question=110,
                emoji="‚öñÔ∏è",
                mood="dramatic"
            ),
            # –í–æ–ø—Ä–æ—Å 114 ‚Äî –∫–æ–Ω–µ—Ü –∞–∫—Ç–∞
            StoryBeat(
                id=27,
                act=3,
                title="–†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–¢—Ä–∏–¥—Ü–∞—Ç—å –ª–µ—Ç... –ò–≤–∞–Ω, —è –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é.\n\n"
                     "–ù–æ –ø–æ—á–µ–º—É —è? –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ –º–µ–Ω—è "
                     "–≤—ã–±—Ä–∞–ª–∏?",
                trigger_question=114,
                emoji="ü§î",
                mood="calm"
            ),
        ])
        
        # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        # –ê–ö–¢ 4: "–†–µ—à–µ–Ω–∏–µ" (–≤–æ–ø—Ä–æ—Å—ã 115-152)
        # –ò–≥—Ä–æ–∫ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –∏ —Ñ–∏–Ω–∞–ª
        # ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        
        beats.extend([
            # –í–æ–ø—Ä–æ—Å 115 ‚Äî –æ—Ç–≤–µ—Ç
            StoryBeat(
                id=28,
                act=4,
                title="–û—Ç–≤–µ—Ç",
                speaker="–ò–≤–∞–Ω",
                text="–ü–æ—Ç–æ–º—É —á—Ç–æ —Ç—ã –≥–æ—Ç–æ–≤. –¢–≤–æ–∏ –ø—Ä–µ–¥–∫–∏... "
                     "–æ–Ω–∏ –±—ã –≥–æ—Ä–¥–∏–ª–∏—Å—å.\n\n"
                     "–¢—ã –Ω–µ –∑–∞–±—ã–ª. –¢—ã –ø—Ä–æ—Å—Ç–æ... –ø–æ—Ç–µ—Ä—è–ª.\n\n"
                     "–ù–æ –Ω–∞—à—ë–ª. –í—Å–ø–æ–º–Ω–∏–ª.",
                trigger_question=115,
                emoji="‚ú®",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 120 ‚Äî —Ç—Ä–µ—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç
            StoryBeat(
                id=29,
                act=4,
                title="–¢—Ä–µ—Ç–∏–π –ø—É—Ç—å",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–¢—ã —Å–∫–∞–∑–∞–ª \"—Ç—Ä–µ—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç\". "
                     "–ß—Ç–æ —ç—Ç–æ?",
                trigger_question=120,
                emoji="‚ùì",
                mood="mysterious"
            ),
            # –í–æ–ø—Ä–æ—Å 125 ‚Äî –æ–±–º–µ–Ω
            StoryBeat(
                id=30,
                act=4,
                title="–û–±–º–µ–Ω",
                speaker="–ò–≤–∞–Ω",
                text="–¢—Ä–µ—Ç–∏–π –≤–∞—Ä–∏–∞–Ω—Ç ‚Äî –æ–±–º–µ–Ω.\n\n"
                     "–¢—ã –º–æ–∂–µ—à—å –∑–∞–±—Ä–∞—Ç—å –º–µ–Ω—è —Å —Å–æ–±–æ–π. "
                     "–í –º–∏—Ä –∂–∏–≤—ã—Ö.\n\n"
                     "–ù–æ —Ç–æ–≥–¥–∞ –∫—Ç–æ-—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–∞–Ω—è—Ç—å –º–æ—ë –º–µ—Å—Ç–æ. "
                     "–ó–¥–µ—Å—å. –ù–∞–≤—Å–µ–≥–¥–∞.\n\n"
                     "–ö—É—Ä–∞—Ç–æ—Ä —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —ç—Ç–æ. –†–∞–∑ –≤ —Å—Ç–æ –ª–µ—Ç.",
                trigger_question=125,
                emoji="üîÑ",
                mood="dramatic"
            ),
            # –í–æ–ø—Ä–æ—Å 130 ‚Äî —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–µ
            StoryBeat(
                id=31,
                act=4,
                title="–†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ó–∞–±—Ä–∞—Ç—å —Ç–µ–±—è... —Ç–æ –µ—Å—Ç—å –≤—ã–ø—É—Å—Ç–∏—Ç—å?\n\n"
                     "–ù–æ —Ç–æ–≥–¥–∞ —è –¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞—Ç—å—Å—è...\n\n"
                     "–≠—Ç–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ, –ò–≤–∞–Ω.",
                trigger_question=130,
                emoji="üòü",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 135 ‚Äî –º—É–¥—Ä–æ—Å—Ç—å
            StoryBeat(
                id=32,
                act=4,
                title="–ú—É–¥—Ä–æ—Å—Ç—å",
                speaker="–ò–≤–∞–Ω",
                text="–Ø –∑–Ω–∞—é. –ü–æ—ç—Ç–æ–º—É –≥–æ–≤–æ—Ä—é –∑–∞—Ä–∞–Ω–µ–µ.\n\n"
                     "–£ —Ç–µ–±—è –µ—Å—Ç—å –≤—Ä–µ–º—è –ø–æ–¥—É–º–∞—Ç—å. "
                     "–î–≤–∞–¥—Ü–∞—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî –Ω–µ —Ç–∞–∫ –º–∞–ª–æ.\n\n"
                     "–ù–æ –ø–æ–º–Ω–∏: –ª—é–±–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–æ. "
                     "–ï—Å–ª–∏ –æ–Ω–æ —Ç–≤–æ—ë.",
                trigger_question=135,
                emoji="üôè",
                mood="calm"
            ),
            # –í–æ–ø—Ä–æ—Å 140 ‚Äî –ø—Ä–æ—â–∞–Ω–∏–µ
            StoryBeat(
                id=33,
                act=4,
                title="–ü—Ä–æ—â–∞–Ω–∏–µ",
                speaker="–ò–≤–∞–Ω",
                text="–ó–Ω–∞–µ—à—å... —è –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω.\n\n"
                     "–ó–∞ —ç—Ç–∏ 30 –ª–µ—Ç —è –≤—Å—Ç—Ä–µ—Ç–∏–ª –º–Ω–æ–≥–∏—Ö. "
                     "–ù–æ —Ç–∞–∫–∏—Ö, –∫–∞–∫ —Ç—ã... –µ–¥–∏–Ω–∏—Ü—ã.\n\n"
                     "–¢—ã –≤—ã—Å–ª—É—à–∞–ª. –¢—ã –ø–æ–Ω—è–ª. "
                     "–ù–∞—Ç–∞–ª—å—è –±—ã —Ç–æ–±–æ–π –≥–æ—Ä–¥–∏–ª–∞—Å—å.",
                trigger_question=140,
                emoji="üíï",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 145 ‚Äî –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
            StoryBeat(
                id=34,
                act=4,
                title="–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å",
                speaker="–ê–ª–µ–∫—Å–µ–π",
                text="–ò–≤–∞–Ω... —è –ø–æ—á—Ç–∏ —Ä–µ—à–∏–ª.\n\n"
                     "–ù–æ —Å–Ω–∞—á–∞–ª–∞ ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä—ã–≤–æ–∫. "
                     "–°–µ–º—å –≤–æ–ø—Ä–æ—Å–æ–≤.\n\n"
                     "–ó–∞–∫–æ–Ω—á–∏–º –≤–º–µ—Å—Ç–µ?",
                trigger_question=145,
                emoji="‚úä",
                mood="emotional"
            ),
            # –í–æ–ø—Ä–æ—Å 150 ‚Äî –ø–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª–æ–º
            StoryBeat(
                id=35,
                act=4,
                title="–ü–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª–æ–º",
                speaker="–ò–≤–∞–Ω",
                text="–î–≤–∞ –≤–æ–ø—Ä–æ—Å–∞ –¥–æ –∫–æ–Ω—Ü–∞.\n\n"
                     "–¢—ã –ø—Ä–æ—à–µ–ª –ø—É—Ç—å, –ê–ª–µ–∫—Å–µ–π. "
                     "–í—Å–ø–æ–º–Ω–∏–ª –≤—Å—ë. –°—Ç–∞–ª –¥—Ä—É–≥–∏–º.\n\n"
                     "–ì–æ—Ç–æ–≤ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —à–∞–≥—É?",
                trigger_question=150,
                emoji="üèÅ",
                mood="calm"
            ),
            # –í–æ–ø—Ä–æ—Å 152 ‚Äî –§–ò–ù–ê–õ
            StoryBeat(
                id=36,
                act=4,
                title="–§–∏–Ω–∞–ª",
                speaker="–ò–≤–∞–Ω",
                text="–í—Å—ë. 152 –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–∑–∞–¥–∏.\n\n"
                     "–¢–µ–ø–µ—Ä—å... —Ç–≤–æ–π –≤—ã–±–æ—Ä, –ê–ª–µ–∫—Å–µ–π.\n\n"
                     "–ü–µ—Ä–≤—ã–π: —É–π—Ç–∏. –í–µ—Ä–Ω—É—Ç—å—Å—è –¥–æ–º–æ–π.\n\n"
                     "–í—Ç–æ—Ä–æ–π: –æ—Å—Ç–∞—Ç—å—Å—è. –°—Ç–∞—Ç—å –≤–µ–¥—É—â–∏–º.\n\n"
                     "–¢—Ä–µ—Ç–∏–π: –æ–±–º–µ–Ω. –û—Å–≤–æ–±–æ–¥–∏—Ç—å –º–µ–Ω—è.\n\n"
                     "–ß—Ç–æ –≤—ã–±–∏—Ä–∞–µ—à—å?",
                trigger_question=152,
                emoji="üèÜ",
                mood="dramatic"
            ),
        ])
        
        return beats
    
    def get_story_beat(self, question_number: int) -> Optional[StoryBeat]:
        """–ü–æ–ª—É—á–∏—Ç—å —Å—é–∂–µ—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç –¥–ª—è –Ω–æ–º–µ—Ä–∞ –≤–æ–ø—Ä–æ—Å–∞."""
        for beat in self.story_beats:
            if beat.trigger_question == question_number:
                if beat.id not in self.shown_beats:
                    self.shown_beats.append(beat.id)
                    return beat
        return None
    
    def get_beats_by_act(self, act_number: int) -> List[StoryBeat]:
        """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—é–∂–µ—Ç–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –∞–∫—Ç–∞."""
        return [b for b in self.story_beats if b.act == act_number]
    
    def get_progress_by_act(self) -> Dict[int, int]:
        """–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∞–∫—Ç–∞–º."""
        progress = {}
        for act in range(1, 5):
            act_beats = self.get_beats_by_act(act)
            shown = sum(1 for b in act_beats if b.id in self.shown_beats)
            progress[act] = shown
        return progress
    
    def reset(self) -> None:
        """–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏—Å—Ç–æ—Ä–∏–∏."""
        self.shown_beats = []
        self.current_question = 0
    
    def get_characters(self) -> List[Character]:
        """–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π."""
        return [self.host, self.player]
    
    def get_character_by_name(self, name: str) -> Optional[Character]:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ –∏–º–µ–Ω–∏."""
        characters = {
            self.host.name: self.host,
            self.player.name: self.player,
        }
        return characters.get(name)
    
    def __len__(self) -> int:
        """–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—é–∂–µ—Ç–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤."""
        return len(self.story_beats)
    
    def get_total_acts(self) -> int:
        """–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–æ–≤."""
        return 4
